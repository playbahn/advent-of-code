static INPUT: &str = "ON 489,959    759,964
OFF 820,516    871,914
OFF 427,423    929,502
ON 774,14    977,877
ON 410,146    864,337
ON 931,331    939,812
OFF 756,53    923,339
OFF 313,787    545,979
OFF 12,823    102,934
TOGGLE 756,965    812,992
OFF 743,684    789,958
TOGGLE 120,314    745,489
TOGGLE 692,845    866,994
OFF 587,176    850,273
OFF 674,321    793,388
TOGGLE 749,672    973,965
ON 943,30    990,907
ON 296,50    729,664
ON 212,957    490,987
TOGGLE 171,31    688,88
OFF 991,989    994,998
OFF 913,943    958,953
OFF 278,258    367,386
TOGGLE 275,796    493,971
OFF 70,873    798,923
TOGGLE 258,985    663,998
ON 601,259    831,486
OFF 914,94    941,102
OFF 558,161    994,647
ON 119,662    760,838
TOGGLE 378,775    526,852
OFF 384,670    674,972
OFF 249,41    270,936
ON 614,742    769,780
ON 427,70    575,441
ON 410,478    985,753
OFF 619,46    931,342
ON 284,55    768,922
OFF 40,592    728,685
ON 825,291    956,950
ON 147,843    592,909
OFF 218,675    972,911
TOGGLE 249,291    350,960
OFF 556,80    967,675
TOGGLE 609,148    968,279
TOGGLE 217,605    961,862
TOGGLE 407,177    548,910
TOGGLE 400,936    599,938
OFF 721,101    925,455
ON 268,631    735,814
TOGGLE 549,969    612,991
TOGGLE 553,268    689,432
OFF 817,668    889,897
TOGGLE 801,544    858,556
TOGGLE 615,729    832,951
OFF 427,477    958,948
ON 164,49    852,946
ON 542,449    774,776
OFF 923,196    980,446
TOGGLE 90,310    718,846
OFF 657,215    744,252
OFF 800,239    811,712
ON 502,90    619,760
TOGGLE 649,512    862,844
OFF 334,903    823,935
OFF 630,233    839,445
ON 713,67    839,865
ON 932,50    982,411
OFF 480,729    984,910
ON 100,219    796,395
ON 758,108    850,950
OFF 427,276    439,938
ON 178,284    670,536
TOGGLE 540,27    625,102
OFF 906,722    936,948
TOGGLE 345,418    859,627
TOGGLE 175,775    580,781
TOGGLE 863,28    929,735
OFF 824,858    905,973
TOGGLE 752,312    863,425
ON 985,716    988,852
OFF 68,504    763,745
TOGGLE 76,209    810,720
OFF 657,607    676,664
TOGGLE 596,869    896,921
OFF 915,411    968,945
OFF 368,39    902,986
ON 11,549    393,597
OFF 842,893    976,911
TOGGLE 274,106    581,329
TOGGLE 406,403    780,950
TOGGLE 408,988    500,994
TOGGLE 217,73    826,951
ON 917,872    961,911
TOGGLE 394,34    510,572
TOGGLE 424,603    583,626
TOGGLE 106,159    755,738
OFF 244,610    472,709
ON 350,265    884,690
ON 688,184    928,280
TOGGLE 279,443    720,797
OFF 615,493    888,610
TOGGLE 118,413    736,632
ON 798,782    829,813
OFF 250,934    442,972
ON 68,503    400,949
TOGGLE 297,482    313,871
TOGGLE 710,3    839,859
ON 125,300    546,888
TOGGLE 482,39    584,159
OFF 536,89    765,962
ON 530,518    843,676
ON 994,467    994,676
ON 623,628    744,927
TOGGLE 704,912    837,983
ON 154,364    517,412
TOGGLE 344,409    780,524
OFF 578,740    725,879
ON 251,933    632,957
ON 827,705    971,789
TOGGLE 191,282    470,929
TOGGLE 324,525    446,867
TOGGLE 534,343    874,971
TOGGLE 550,650    633,980
TOGGLE 837,404    881,915
TOGGLE 338,881    845,905
ON 469,462    750,696
ON 741,703    892,870
OFF 570,215    733,562
ON 445,576    870,775
ON 466,747    554,878
OFF 820,453    868,712
OFF 892,706    938,792
OFF 300,238    894,746
OFF 306,44    457,444
OFF 912,569    967,963
TOGGLE 109,756    297,867
ON 37,546    41,951
ON 321,637    790,910
TOGGLE 66,50    579,301
TOGGLE 933,221    933,791
ON 486,676    878,797
ON 417,231    556,317
TOGGLE 904,468    981,873
ON 417,675    749,712
ON 692,371    821,842
TOGGLE 324,73    830,543
ON 912,490    977,757
OFF 634,872    902,949
TOGGLE 266,779    870,798
ON 772,982    990,996
OFF 607,46    798,559
ON 295,602    963,987
ON 657,86    944,742
OFF 334,639    456,821
OFF 997,667    997,670
OFF 725,832    951,945
OFF 30,120    952,984
ON 860,965    917,976
TOGGLE 471,997    840,998
OFF 319,307    928,504
TOGGLE 823,631    940,908
TOGGLE 969,984    981,993
OFF 691,319    865,954
TOGGLE 911,926    938,929
ON 953,937    968,991
TOGGLE 914,643    975,840
ON 266,982    436,996
OFF 101,896    321,932
OFF 193,852    751,885
OFF 576,532    863,684
ON 761,456    940,783
ON 20,290    398,933
OFF 435,335    644,652
ON 830,569    905,770
OFF 630,517    905,654
ON 664,53    886,976
TOGGLE 275,416    408,719
ON 370,621    515,793
ON 483,373    654,749
ON 656,786    847,928
OFF 532,752    945,974
TOGGLE 301,150    880,792
OFF 951,488    958,952
ON 207,729    882,828
TOGGLE 694,532    973,961
TOGGLE 676,639    891,802
OFF 653,6    905,519
TOGGLE 391,109    418,312
ON 877,423    957,932
ON 340,145    563,522
OFF 978,467    988,895
OFF 396,418    420,885
OFF 31,308    816,316
ON 107,675    758,824
ON 61,82    789,876
ON 750,743    754,760
TOGGLE 88,733    736,968
OFF 754,349    849,897
TOGGLE 157,50    975,781
OFF 230,231    865,842
OFF 516,317    630,329
OFF 697,820    829,903
ON 218,250    271,732
TOGGLE 56,167    404,431
TOGGLE 626,891    680,927
TOGGLE 370,207    791,514
TOGGLE 860,74    949,888
ON 416,527    616,541
OFF 745,449    786,908
ON 485,554    689,689
ON 586,62    693,141
TOGGLE 506,759    768,829
ON 473,109    929,166
ON 760,617    773,789
TOGGLE 595,683    618,789
OFF 210,775    825,972
TOGGLE 12,426    179,982
ON 774,539    778,786
ON 102,498    121,807
OFF 706,897    834,965
OFF 678,529    824,627
ON 7,765    615,870
OFF 730,872    974,943
OFF 595,626    836,711
OFF 215,424    841,959
TOGGLE 341,780    861,813
TOGGLE 507,503    568,822
ON 252,603    349,655
TOGGLE 93,521    154,834
ON 565,682    951,954
ON 544,318    703,418
TOGGLE 756,953    891,964
ON 531,123    856,991
ON 148,315    776,559
OFF 925,835    963,971
ON 895,944    967,964
OFF 102,527    650,747
TOGGLE 626,105    738,720
OFF 160,75    384,922
TOGGLE 813,724    903,941
ON 207,107    982,849
TOGGLE 750,505    961,697
TOGGLE 105,410    885,819
ON 226,104    298,283
OFF 224,604    508,762
ON 477,368    523,506
OFF 477,901    627,936
OFF 887,131    889,670
ON 896,994    938,999
TOGGLE 401,580    493,728
TOGGLE 987,184    991,205
ON 821,643    882,674
TOGGLE 784,940    968,959
OFF 251,293    274,632
OFF 339,840    341,844
OFF 675,351    675,836
TOGGLE 918,857    944,886
TOGGLE 70,253    918,736
OFF 612,604    772,680
OFF 277,40    828,348
TOGGLE 692,139    698,880
TOGGLE 124,446    883,453
TOGGLE 969,932    990,945
TOGGLE 855,692    993,693
TOGGLE 722,472    887,899
TOGGLE 978,149    985,442
TOGGLE 837,540    916,889
OFF 612,2    835,82
TOGGLE 560,767    878,856
ON 461,734    524,991
TOGGLE 206,824    976,912
ON 826,610    879,892
ON 577,699    956,933
OFF 9,250    50,529
OFF 77,657    817,677
ON 68,419    86,426
ON 991,720    992,784
ON 668,20    935,470
OFF 133,418    613,458
OFF 487,286    540,328
TOGGLE 247,874    840,955
TOGGLE 301,808    754,970
OFF 34,194    578,203
OFF 451,49    492,921
ON 907,256    912,737
OFF 479,305    702,587
ON 545,583    732,749
TOGGLE 11,16    725,868
ON 965,343    986,908
ON 674,953    820,965
TOGGLE 398,147    504,583
OFF 778,194    898,298
ON 179,140    350,852
OFF 241,118    530,832
OFF 41,447    932,737
OFF 820,663    832,982
ON 550,460    964,782
ON 31,760    655,892
TOGGLE 628,958    811,992";

#[derive(Clone, Copy, PartialEq)]
enum State {
    ON,
    OFF,
}

struct Coord {
    x: u32,
    y: u32,
}

struct Instruction<'a> {
    config: &'a str,
    start: Coord,
    end: Coord,
}

use State::*;

fn main() {
    // let mut grid: [[State; 1000]; 1000] = [[OFF; 1000]; 1000];

    let ins_vec: Vec<&str> = INPUT.lines().collect();

    let mut ins_vec_main: Vec<Instruction> = Vec::new();

    for ins in ins_vec {
        let mut ins_iter = ins.split_ascii_whitespace();

        let config: &str = ins_iter.next().unwrap();
        let mut start = ins_iter.next().unwrap().split_terminator(',');
        let start: Coord = Coord {
            x: start.next().unwrap().parse().unwrap(),
            y: start.next().unwrap().parse().unwrap(),
        };

        let mut end = ins_iter.next().unwrap().split_terminator(',');
        let end: Coord = Coord {
            x: end.next().unwrap().parse().unwrap(),
            y: end.next().unwrap().parse().unwrap(),
        };

        ins_vec_main.push(Instruction { config, start, end });
    }

    let mut grid: Vec<[State; 1000]> = vec![[OFF; 1000]; 1000];

    for instruction in &ins_vec_main {
        match instruction.config {
            "ON" => {
                for x in instruction.start.x..instruction.end.x + 1 {
                    for y in instruction.start.y..instruction.end.y + 1 {
                        grid[x as usize][y as usize] = ON;
                    }
                }
            },

            "OFF" => {
                for x in instruction.start.x..instruction.end.x + 1 {
                    for y in instruction.start.y..instruction.end.y + 1 {
                        grid[x as usize][y as usize] = OFF;
                    }
                }
            },
            "TOGGLE" => {
                for x in instruction.start.x..instruction.end.x + 1 {
                    for y in instruction.start.y..instruction.end.y + 1 {
                        if grid[x as usize][y as usize] == ON {
                            grid[x as usize][y as usize] = OFF;
                        } else {
                            grid[x as usize][y as usize] = ON;
                        }
                    }
                }
            },
            _ => {},
        }
    }
    
    let mut lit: u32 = 0;
    
    for x in grid {
        for y in x {
            if y == ON {
                lit += 1;
            }
        }
    }
    
    println!("{}", lit);
    
    let mut grid: Vec<[u32; 1000]> = vec![[0; 1000]; 1000];
    
    for instruction in &ins_vec_main {
        match instruction.config {
            "ON" => {
                for x in instruction.start.x..instruction.end.x + 1 {
                    for y in instruction.start.y..instruction.end.y + 1 {
                        grid[x as usize][y as usize] += 1;
                    }
                }
            },
            
            "OFF" => {
                for x in instruction.start.x..instruction.end.x + 1 {
                    for y in instruction.start.y..instruction.end.y + 1 {
                        if grid[x as usize][y as usize] > 0 {
                            grid[x as usize][y as usize] -= 1;
                        }
                    }
                }
            },
            "TOGGLE" => {
                for x in instruction.start.x..instruction.end.x + 1 {
                    for y in instruction.start.y..instruction.end.y + 1 {
                        grid[x as usize][y as usize] += 2;
                    }
                }
            },
            _ => {},
        }
    }

    let mut brightness: u32 = 0;
    
    for x in grid {
        for y in x {
            brightness += y;
        }
    }
    
    println!("{}", brightness);
}
